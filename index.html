<!DOCTYPE html>
<html>
<head>
  <title>ЁЯЫбя╕П News247 Admin & Viewer</title>
  <style>
    body {
      background-color: #0f0f0f;
      color: #00ff99;
      font-family: 'Courier New', monospace;
      padding: 20px;
    }
    h1, h2 {
      text-shadow: 0 0 10px #00ff99;
    }
    input, textarea {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      background: #111;
      color: #0f0;
      border: 1px solid #0f0;
    }
    button {
      background: #000;
      color: #0f0;
      border: 2px solid #0f0;
      padding: 10px 20px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #0f0;
      color: #000;
    }
    img {
      margin: 10px 0;
      border: 2px solid #00ff99;
    }
    hr {
      border-color: #00ff99;
    }
    .viewer {
      background: #111;
      padding: 10px;
      margin-top: 30px;
      border: 1px solid #0f0;
    }
  </style>
</head>
<body onload="loadNewsList()">
  <h1>ЁЯХ╢я╕П News247 Admin Panel</h1>

  <section>
    <h2>ЁЯУ░ ржирж┐ржЙржЬ ржЖржкрж▓рзЛржб</h2>
    <input type="text" id="title" placeholder="ржирж┐ржЙржЬ рж╢рж┐рж░рзЛржирж╛ржо"><br>
    <textarea id="content" placeholder="ржирж┐ржЙржЬ ржХржиржЯрзЗржирзНржЯ"></textarea><br>
    <input type="file" id="imageUpload"><br>
    <button onclick="submitNews()">тЬЕ ржирж┐ржЙржЬ ржЖржкрж▓рзЛржб ржХрж░рзЛ</button>
  </section>

  <section>
    <h2>ЁЯЦ╝я╕П рж▓рзЛржЧрзЛ ржкрж░рж┐ржмрж░рзНрждржи</h2>
    <input type="file" id="logoUpload"><br>
    <button onclick="uploadLogo()">ЁЯФД рж▓рзЛржЧрзЛ ржЖржкрж▓рзЛржб ржХрж░рзЛ</button>
  </section>

  <section>
    <h2>ЁЯУЛ рж╕ржм ржирж┐ржЙржЬ</h2>
    <div id="newsList"></div>
  </section>

  <div class="viewer">
    <h2>ЁЯМР ржирж┐ржЙржЬ ржнрж┐ржЙрзЯрж╛рж░</h2>
    <div id="publicFeed"></div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBQEZ0WIG92RzwI6e6TnBmTp4MgrYSMLBs",
      authDomain: "news247-64290.firebaseapp.com",
      databaseURL: "https://news247-64290-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "news247-64290",
      storageBucket: "news247-64290.appspot.com",
      messagingSenderId: "86736515101",
      appId: "1:86736515101:web:061d198e92e4b46c3956f4",
      measurementId: "G-BK7QNFZT96"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const storage = firebase.storage();

    function submitNews() {
      const title = document.getElementById('title').value;
      const content = document.getElementById('content').value;
      const imageFile = document.getElementById('imageUpload').files[0];
      const newsId = Date.now();

      const imgRef = storage.ref(`news/${newsId}.jpg`);
      imgRef.put(imageFile).then(() => {
        imgRef.getDownloadURL().then(url => {
          db.ref('news/' + newsId).set({
            title: title,
            content: content,
            image: url,
            timestamp: newsId
          });
          alert("тЬЕ ржирж┐ржЙржЬ ржЖржкрж▓рзЛржб рж╕ржлрж▓!");
        });
      });
    }

    function uploadLogo() {
      const logoFile = document.getElementById('logoUpload').files[0];
      const logoRef = storage.ref('logo/logo.png');
      logoRef.put(logoFile).then(() => {
        alert("тЬЕ рж▓рзЛржЧрзЛ ржЖржкрж▓рзЛржб рж╕ржлрж▓!");
      });
    }

    function loadNewsList() {
      const newsList = document.getElementById('newsList');
      const publicFeed = document.getElementById('publicFeed');
      db.ref('news').on('value', snapshot => {
        newsList.innerHTML = '';
        publicFeed.innerHTML = '';
        snapshot.forEach(child => {
          const data = child.val();
          const id = child.key;

          const adminDiv = document.createElement('div');
          adminDiv.innerHTML = `
            <h3>${data.title}</h3>
            <p>${data.content}</p>
            <img src="${data.image}" width="200"><br>
            <button onclick="editNews('${id}', '${data.title}', '${data.content}')">тЬПя╕П ржПржбрж┐ржЯ</button>
            <button onclick="deleteNews('${id}')">тЭМ ржбрж┐рж▓рж┐ржЯ</button>
            <hr>
          `;
          newsList.appendChild(adminDiv);

          const publicDiv = document.createElement('div');
          publicDiv.innerHTML = `
            <h3>${data.title}</h3>
            <img src="${data.image}" width="300"><br>
            <p>${data.content}</p>
            <hr>
          `;
          publicFeed.appendChild(publicDiv);
        });
      });
    }

    function deleteNews(id) {
      if (confirm("ржирж┐рж╢рзНржЪрж┐рждржнрж╛ржмрзЗ ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржЪрж╛ржУ?")) {
        db.ref('news/' + id).remove().then(() => {
          alert("тЬЕ ржбрж┐рж▓рж┐ржЯ рж╕ржлрж▓!");
        });
      }
    }

    function editNews(id, oldTitle, oldContent) {
      const newTitle = prompt("ржирждрзБржи рж╢рж┐рж░рзЛржирж╛ржо:", oldTitle);
      const newContent = prompt("ржирждрзБржи ржХржиржЯрзЗржирзНржЯ:", oldContent);
      if (newTitle && newContent) {
        db.ref('news/' + id).update({
          title: newTitle,
          content: newContent
        }).then(() => {
          alert("тЬЕ ржПржбрж┐ржЯ рж╕ржлрж▓!");
        });
      }
    }
  </script>
</body>
</html>
